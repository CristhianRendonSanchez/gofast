{"generator":"Code Snippets v3.9.3","date_created":"2025-12-12 19:46","snippets":[{"id":40,"name":"gofast_trabaja_con_nosotros","code":"\n\/***************************************************\n * GOFAST \u2013 TRABAJA CON NOSOTROS\n * Shortcode: [gofast_trabaja_con_nosotros]\n * URL: \/trabaja-con-nosotros\n * \n * Formulario de solicitud de trabajo para mensajeros\n * Incluye subida de hoja de vida y redirecci\u00f3n a WhatsApp\n ***************************************************\/\nfunction gofast_trabaja_con_nosotros_shortcode() {\n    global $wpdb;\n\n    if (session_status() === PHP_SESSION_NONE) {\n        session_start();\n    }\n\n    $mensaje = '';\n    $mensaje_tipo = '';\n    $mostrar_formulario = true;\n\n    \/*********************************************\n     * PROCESAMIENTO DEL FORMULARIO\n     *********************************************\/\n\n    if (isset($_POST['gofast_enviar_solicitud']) && wp_verify_nonce($_POST['gofast_solicitud_nonce'], 'gofast_enviar_solicitud')) {\n        \n        \/\/ Validar y sanitizar datos\n        $nombre = sanitize_text_field($_POST['nombre'] ?? '');\n        $whatsapp = sanitize_text_field($_POST['whatsapp'] ?? '');\n        $email = sanitize_email($_POST['email'] ?? '');\n        $pregunta1 = sanitize_textarea_field($_POST['pregunta1'] ?? '');\n        $pregunta2 = sanitize_textarea_field($_POST['pregunta2'] ?? '');\n        $pregunta3 = sanitize_textarea_field($_POST['pregunta3'] ?? '');\n        $pregunta4 = sanitize_textarea_field($_POST['pregunta4'] ?? '');\n        $pregunta5 = sanitize_textarea_field($_POST['pregunta5'] ?? '');\n\n        \/\/ Validaciones\n        if (empty($nombre) || empty($whatsapp) || empty($pregunta1) || empty($pregunta2) || \n            empty($pregunta3) || empty($pregunta4) || empty($pregunta5)) {\n            $mensaje = 'Por favor completa todos los campos obligatorios.';\n            $mensaje_tipo = 'error';\n        } else {\n            \/\/ Procesar archivo de hoja de vida\n            $archivo_cv = null;\n            $nombre_archivo = null;\n\n            if (isset($_FILES['hoja_vida']) && $_FILES['hoja_vida']['error'] === UPLOAD_ERR_OK) {\n                $file = $_FILES['hoja_vida'];\n                $allowed_types = ['application\/pdf', 'application\/msword', 'application\/vnd.openxmlformats-officedocument.wordprocessingml.document'];\n                $allowed_extensions = ['pdf', 'doc', 'docx'];\n                \n                $file_extension = strtolower(pathinfo($file['name'], PATHINFO_EXTENSION));\n                $file_type = $file['type'];\n                \n                \/\/ Validar tipo y extensi\u00f3n\n                if (in_array($file_type, $allowed_types) || in_array($file_extension, $allowed_extensions)) {\n                    \/\/ Validar tama\u00f1o (m\u00e1ximo 5MB)\n                    if ($file['size'] <= 5 * 1024 * 1024) {\n                        \/\/ Crear directorio si no existe\n                        $upload_dir = wp_upload_dir();\n                        $gofast_dir = $upload_dir['basedir'] . '\/gofast-cvs';\n                        \n                        if (!file_exists($gofast_dir)) {\n                            wp_mkdir_p($gofast_dir);\n                        }\n\n                        \/\/ Generar nombre \u00fanico\n                        $nombre_sanitizado = sanitize_file_name($nombre);\n                        $timestamp = time();\n                        $nombre_archivo_original = $file['name'];\n                        $nombre_archivo_nuevo = $nombre_sanitizado . '_' . $timestamp . '_' . uniqid() . '.' . $file_extension;\n                        $ruta_completa = $gofast_dir . '\/' . $nombre_archivo_nuevo;\n\n                        \/\/ Mover archivo\n                        if (move_uploaded_file($file['tmp_name'], $ruta_completa)) {\n                            $archivo_cv = $upload_dir['baseurl'] . '\/gofast-cvs\/' . $nombre_archivo_nuevo;\n                            $nombre_archivo = $nombre_archivo_original;\n                        } else {\n                            $mensaje = 'Error al subir el archivo. Por favor intenta nuevamente.';\n                            $mensaje_tipo = 'error';\n                        }\n                    } else {\n                        $mensaje = 'El archivo es demasiado grande. El tama\u00f1o m\u00e1ximo es 5MB.';\n                        $mensaje_tipo = 'error';\n                    }\n                } else {\n                    $mensaje = 'Tipo de archivo no permitido. Solo se aceptan PDF, DOC o DOCX.';\n                    $mensaje_tipo = 'error';\n                }\n            }\n\n            \/\/ Si no hay errores, guardar en la base de datos\n            if (empty($mensaje)) {\n                $insertado = $wpdb->insert(\n                    'solicitudes_trabajo',\n                    [\n                        'nombre' => $nombre,\n                        'whatsapp' => $whatsapp,\n                        'email' => $email ?: null,\n                        'pregunta1' => $pregunta1,\n                        'pregunta2' => $pregunta2,\n                        'pregunta3' => $pregunta3,\n                        'pregunta4' => $pregunta4,\n                        'pregunta5' => $pregunta5,\n                        'archivo_cv' => $archivo_cv,\n                        'nombre_archivo' => $nombre_archivo,\n                        'estado' => 'pendiente',\n                        'created_at' => gofast_current_time('mysql')\n                    ],\n                    ['%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s']\n                );\n\n                if ($insertado) {\n                    \/\/ Limpiar WhatsApp (solo n\u00fameros)\n                    $whatsapp_limpio = preg_replace('\/[^0-9]\/', '', $whatsapp);\n                    \n                    \/\/ Mensaje para WhatsApp\n                    $mensaje_whatsapp = urlencode(\"Hola! Soy *\" . $nombre . \"* y acabo de completar mi solicitud de trabajo en GO FAST mensajer\u00eda express. Mi WhatsApp es: *\" . $whatsapp_limpio . \"*. Estoy interesado en la vacante de mensajer\u00eda. \u00bfPodr\u00edan contactarme?\");\n                    \n                    \/\/ Redirigir a WhatsApp (CAMBIAR ESTE N\u00daMERO POR EL N\u00daMERO REAL DE GO FAST)\n                    $whatsapp_gofast = \"573001234567\"; \/\/ TODO: Cambiar por el n\u00famero real de WhatsApp de GO FAST\n                    $url_whatsapp = \"https:\/\/wa.me\/\" . $whatsapp_gofast . \"?text=\" . $mensaje_whatsapp;\n                    \n                    \/\/ Mostrar mensaje de \u00e9xito y redirigir\n                    $mostrar_formulario = false;\n                    ob_start();\n                    ?>\n                    <div class=\"gofast-home\">\n                        <div class=\"gofast-box\" style=\"text-align: center; padding: 40px 20px; max-width: 600px; margin: 40px auto;\">\n                            <div style=\"font-size: 64px; margin-bottom: 20px;\">\u2705<\/div>\n                            <h2 style=\"margin: 0 0 16px 0; color: #000;\">\u00a1Solicitud Enviada Exitosamente!<\/h2>\n                            <p style=\"margin: 0 0 24px 0; color: #666; font-size: 16px; line-height: 1.6;\">\n                                Gracias <strong><?= esc_html($nombre) ?><\/strong>, hemos recibido tu solicitud correctamente.\n                            <\/p>\n                            <p style=\"margin: 0 0 32px 0; color: #666; font-size: 14px;\">\n                                Ser\u00e1s redirigido a WhatsApp en unos segundos para continuar el proceso...\n                            <\/p>\n                            <a href=\"<?= esc_url($url_whatsapp) ?>\" \n                               target=\"_blank\" \n                               class=\"gofast-btn-request\" \n                               style=\"display: inline-block; text-decoration: none; margin-top: 16px;\">\n                                \ud83d\udcf1 Continuar en WhatsApp\n                            <\/a>\n                        <\/div>\n                    <\/div>\n                    <script>\n                        setTimeout(function() {\n                            window.open('<?= esc_js($url_whatsapp) ?>', '_blank');\n                        }, 2000);\n                    <\/script>\n                    <?php\n                    return ob_get_clean();\n                } else {\n                    $mensaje = 'Error al guardar la solicitud. Por favor intenta nuevamente.';\n                    $mensaje_tipo = 'error';\n                }\n            }\n        }\n    }\n\n    ob_start();\n    ?>\n\n<div class=\"gofast-home\">\n    <div class=\"gofast-box\" style=\"margin-bottom: 24px;\">\n        <h1 style=\"margin-top: 0; margin-bottom: 12px; color: #000;\">\ud83d\udce6 Trabaja con Nosotros<\/h1>\n        <p style=\"margin: 0; color: #666; font-size: 15px; line-height: 1.6;\">\n            Somos una agencia de mensajer\u00eda en convenio con diferentes establecimientos p\u00fablicos, comerciales, empresas y emprendedores de la ciudad de Tul\u00faa.\n        <\/p>\n    <\/div>\n\n    <!-- Informaci\u00f3n sobre rentabilidad y tarifas -->\n    <div class=\"gofast-box\" style=\"background: #fff9d6; border-left: 5px solid var(--gofast-yellow); margin-bottom: 24px;\">\n        <h3 style=\"margin-top: 0; margin-bottom: 16px; color: #000;\">\ud83d\udcb0 Rentabilidad<\/h3>\n        <p style=\"margin: 0 0 12px 0; color: #333; font-size: 15px;\">\n            <strong>La rentabilidad del mensajero es del 80% del total producido en el d\u00eda.<\/strong>\n        <\/p>\n        <p style=\"margin: 0; color: #666; font-size: 14px;\">\n            Las tarifas de cada servicio var\u00edan de acuerdo a la distancia entre punto de recogida y entrega:\n        <\/p>\n        <ul style=\"margin: 12px 0 0 0; padding-left: 20px; color: #666; font-size: 14px;\">\n            <li><strong>$3,500<\/strong> - Distancia m\u00ednima<\/li>\n            <li><strong>$4,000<\/strong> - Distancia intermedia<\/li>\n            <li><strong>$4,500<\/strong> - Distancia lejana<\/li>\n            <li><strong>$5,000 \/ $6,000<\/strong> - Distancia extralejana<\/li>\n            <li><strong>$6,000 \/ $7,000 \/ $8,000<\/strong> - Zonas aleda\u00f1as<\/li>\n        <\/ul>\n    <\/div>\n\n    <!-- Requisitos -->\n    <div class=\"gofast-box\" style=\"background: #e8f4ff; border-left: 5px solid #1f6feb; margin-bottom: 24px;\">\n        <h3 style=\"margin-top: 0; margin-bottom: 16px; color: #000;\">\ud83d\udcdd Requisitos para Laborar<\/h3>\n        <ul style=\"margin: 0; padding-left: 20px; color: #333; font-size: 14px; line-height: 1.8;\">\n            <li>Conocimiento en direcciones<\/li>\n            <li>Disponibilidad de tiempo<\/li>\n            <li>Moto con documentaci\u00f3n al d\u00eda<\/li>\n            <li>Tel\u00e9fono con WhatsApp<\/li>\n            <li>Excelente actitud y presentaci\u00f3n personal<\/li>\n            <li>Traje de lluvia<\/li>\n            <li>Base de efectivo (50,000 m\u00ednimo)<\/li>\n        <\/ul>\n    <\/div>\n\n    <!-- Mensaje de error si existe -->\n    <?php if ($mensaje && $mensaje_tipo === 'error'): ?>\n        <div class=\"gofast-box\" style=\"background: #f8d7da; border-left: 4px solid #dc3545; color: #721c24; margin-bottom: 20px;\">\n            \u26a0\ufe0f <?= esc_html($mensaje) ?>\n        <\/div>\n    <?php endif; ?>\n\n    <!-- Formulario de solicitud -->\n    <?php if ($mostrar_formulario): ?>\n    <div class=\"gofast-box\">\n        <h3 style=\"margin-top: 0; margin-bottom: 20px; color: #000;\">\ud83d\udcdd Formulario de Solicitud<\/h3>\n        <p style=\"margin: 0 0 20px 0; color: #666; font-size: 14px;\">\n            Por favor completa el siguiente formulario para aplicar a la vacante de mensajer\u00eda.\n        <\/p>\n\n        <form method=\"post\" enctype=\"multipart\/form-data\" id=\"form-solicitud-trabajo\">\n            <?php wp_nonce_field('gofast_enviar_solicitud', 'gofast_solicitud_nonce'); ?>\n            \n            <!-- Datos personales -->\n            <div style=\"background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 24px;\">\n                <h4 style=\"margin-top: 0; margin-bottom: 16px; color: #000; font-size: 16px;\">\ud83d\udc64 Datos Personales<\/h4>\n                \n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    Nombre completo <span style=\"color: #dc3545;\">*<\/span>\n                <\/label>\n                <input type=\"text\" \n                       name=\"nombre\" \n                       required \n                       placeholder=\"Ej: Juan P\u00e9rez\"\n                       style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 16px; box-sizing: border-box;\"\n                       value=\"<?= isset($_POST['nombre']) ? esc_attr($_POST['nombre']) : '' ?>\">\n\n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    WhatsApp <span style=\"color: #dc3545;\">*<\/span>\n                <\/label>\n                <input type=\"text\" \n                       name=\"whatsapp\" \n                       required \n                       placeholder=\"Ej: 3001234567\"\n                       style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 16px; box-sizing: border-box;\"\n                       value=\"<?= isset($_POST['whatsapp']) ? esc_attr($_POST['whatsapp']) : '' ?>\">\n\n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    Email (opcional)\n                <\/label>\n                <input type=\"email\" \n                       name=\"email\" \n                       placeholder=\"Ej: juan@email.com\"\n                       style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 0; box-sizing: border-box;\"\n                       value=\"<?= isset($_POST['email']) ? esc_attr($_POST['email']) : '' ?>\">\n            <\/div>\n\n            <!-- Preguntas -->\n            <div style=\"background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 24px;\">\n                <h4 style=\"margin-top: 0; margin-bottom: 16px; color: #000; font-size: 16px;\">\u2753 Preguntas de Selecci\u00f3n<\/h4>\n\n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    1. \u00bfTiene experiencia en reparto a domicilio y conocimiento en direcciones? \ud83e\udd89 <span style=\"color: #dc3545;\">*<\/span>\n                <\/label>\n                <textarea name=\"pregunta1\" \n                          required \n                          rows=\"3\"\n                          placeholder=\"Describe tu experiencia...\"\n                          style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 16px; box-sizing: border-box; resize: vertical; font-family: inherit;\"><?= isset($_POST['pregunta1']) ? esc_textarea($_POST['pregunta1']) : '' ?><\/textarea>\n\n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    2. \u00bfCu\u00e1l es su disponibilidad de tiempo? \ud83d\udd50 <span style=\"color: #dc3545;\">*<\/span>\n                <\/label>\n                <textarea name=\"pregunta2\" \n                          required \n                          rows=\"3\"\n                          placeholder=\"Ej: Disponible de lunes a s\u00e1bado de 8am a 6pm\"\n                          style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 16px; box-sizing: border-box; resize: vertical; font-family: inherit;\"><?= isset($_POST['pregunta2']) ? esc_textarea($_POST['pregunta2']) : '' ?><\/textarea>\n\n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    3. \u00bfTiene veh\u00edculo propio con documentaci\u00f3n al d\u00eda? \u2714 <span style=\"color: #dc3545;\">*<\/span>\n                <\/label>\n                <textarea name=\"pregunta3\" \n                          required \n                          rows=\"3\"\n                          placeholder=\"Indica si tienes veh\u00edculo y el estado de la documentaci\u00f3n...\"\n                          style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 16px; box-sizing: border-box; resize: vertical; font-family: inherit;\"><?= isset($_POST['pregunta3']) ? esc_textarea($_POST['pregunta3']) : '' ?><\/textarea>\n\n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    4. \u00bfTipo de motocicleta? \ud83d\udef5 <span style=\"color: #dc3545;\">*<\/span>\n                <\/label>\n                <textarea name=\"pregunta4\" \n                          required \n                          rows=\"3\"\n                          placeholder=\"Ej: Moto 150cc, marca Honda\"\n                          style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 16px; box-sizing: border-box; resize: vertical; font-family: inherit;\"><?= isset($_POST['pregunta4']) ? esc_textarea($_POST['pregunta4']) : '' ?><\/textarea>\n\n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    5. \u00bfCiudad de residencia? \ud83c\udfe0 <span style=\"color: #dc3545;\">*<\/span>\n                <\/label>\n                <textarea name=\"pregunta5\" \n                          required \n                          rows=\"3\"\n                          placeholder=\"Ej: Tulu\u00e1, Valle del Cauca\"\n                          style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 0; box-sizing: border-box; resize: vertical; font-family: inherit;\"><?= isset($_POST['pregunta5']) ? esc_textarea($_POST['pregunta5']) : '' ?><\/textarea>\n            <\/div>\n\n            <!-- Subida de hoja de vida -->\n            <div style=\"background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 24px;\">\n                <h4 style=\"margin-top: 0; margin-bottom: 16px; color: #000; font-size: 16px;\">\ud83d\udcc4 Hoja de Vida<\/h4>\n                \n                <label style=\"display: block; font-weight: 600; margin-bottom: 6px; color: #000; font-size: 14px;\">\n                    Subir hoja de vida (PDF, DOC o DOCX) <span style=\"color: #dc3545;\">*<\/span>\n                <\/label>\n                <input type=\"file\" \n                       name=\"hoja_vida\" \n                       required \n                       accept=\".pdf,.doc,.docx,application\/pdf,application\/msword,application\/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n                       style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; margin-bottom: 8px; box-sizing: border-box; background: #fff;\"\n                       onchange=\"validarArchivo(this)\">\n                <small style=\"display: block; color: #666; font-size: 12px; margin-top: 4px;\">\n                    Tama\u00f1o m\u00e1ximo: 5MB. Formatos permitidos: PDF, DOC, DOCX\n                <\/small>\n                <div id=\"mensaje-archivo\" style=\"margin-top: 8px; font-size: 13px;\"><\/div>\n            <\/div>\n\n            <!-- Bot\u00f3n enviar -->\n            <button type=\"submit\" \n                    name=\"gofast_enviar_solicitud\" \n                    class=\"gofast-btn-request\"\n                    style=\"width: 100%; font-size: 18px; padding: 16px;\">\n                \u2705 Enviar Solicitud\n            <\/button>\n        <\/form>\n    <\/div>\n    <?php endif; ?>\n<\/div>\n\n<script>\nfunction validarArchivo(input) {\n    const mensajeDiv = document.getElementById('mensaje-archivo');\n    const file = input.files[0];\n    \n    if (!file) {\n        mensajeDiv.innerHTML = '';\n        return;\n    }\n    \n    \/\/ Validar tama\u00f1o (5MB)\n    const maxSize = 5 * 1024 * 1024; \/\/ 5MB en bytes\n    if (file.size > maxSize) {\n        mensajeDiv.innerHTML = '<span style=\"color: #dc3545;\">\u26a0\ufe0f El archivo es demasiado grande. M\u00e1ximo 5MB.<\/span>';\n        input.value = '';\n        return;\n    }\n    \n    \/\/ Validar extensi\u00f3n\n    const allowedExtensions = ['pdf', 'doc', 'docx'];\n    const fileExtension = file.name.split('.').pop().toLowerCase();\n    \n    if (!allowedExtensions.includes(fileExtension)) {\n        mensajeDiv.innerHTML = '<span style=\"color: #dc3545;\">\u26a0\ufe0f Tipo de archivo no permitido. Solo PDF, DOC o DOCX.<\/span>';\n        input.value = '';\n        return;\n    }\n    \n    \/\/ Todo bien\n    mensajeDiv.innerHTML = '<span style=\"color: #28a745;\">\u2705 Archivo v\u00e1lido (' + (file.size \/ 1024 \/ 1024).toFixed(2) + ' MB)<\/span>';\n}\n<\/script>\n\n    <?php\n    return ob_get_clean();\n}\nadd_shortcode('gofast_trabaja_con_nosotros', 'gofast_trabaja_con_nosotros_shortcode');\n\n","active":true,"modified":"2025-12-06 21:30:38","revision":"1"}]}