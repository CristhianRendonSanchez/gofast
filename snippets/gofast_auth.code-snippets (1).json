{"generator":"Code Snippets v3.9.2","date_created":"2025-11-21 22:43","snippets":[{"id":19,"name":"gofast_auth","code":"\/***************************************************\n * GOFAST \u2013 SHORTCODE AUTH (LOGIN + REGISTRO BONITOS)\n ***************************************************\/\nfunction gofast_auth_shortcode() {\n    if (session_status() === PHP_SESSION_NONE) session_start();\n\n    \/\/ Si ya est\u00e1 logueado \u2192 no permitir volver al login\n    if (!empty($_SESSION['gofast_user_id'])) {\n        wp_redirect(home_url('\/'));\n        exit;\n    }\n\n    $modo = !empty($_GET['registro']) ? 'registro' : 'login';\n\n    \/\/ Recuperar error\n    $error = '';\n    if (!empty($_SESSION['gofast_auth_error'])) {\n        $error = $_SESSION['gofast_auth_error'];\n        unset($_SESSION['gofast_auth_error']);\n    }\n\n    ob_start();\n?>\n<div class=\"gofast-auth-container\">\n\n    <!-- Mensaje de error -->\n    <?php if ($error): ?>\n        <div class=\"gofast-alert-error\">\u26a0\ufe0f <?= esc_html($error) ?><\/div>\n    <?php endif; ?>\n\n    <!-- Aviso cookies -->\n    <div class=\"gofast-cookie-box\" id=\"cookieBox\" style=\"display:none;\">\n        \ud83c\udf6a Usamos cookies para recordar tu sesi\u00f3n por 30 d\u00edas.  \n        <button onclick=\"gofastAcceptCookies()\" class=\"gofast-cookie-btn\">Aceptar<\/button>\n    <\/div>\n\n    <!-- LOGIN -->\n    <?php if ($modo === 'login'): ?>\n\n        <h2 class=\"gofast-auth-title\">Iniciar sesi\u00f3n<\/h2>\n\n        <form method=\"post\" action=\"\">\n            <label>Email o WhatsApp<\/label>\n            <input type=\"text\" name=\"user\" required>\n\n            <label>Contrase\u00f1a<\/label>\n            <div class=\"gofast-password-wrapper\">\n                <input type=\"password\" name=\"password\" id=\"login_pass\" required>\n                <button type=\"button\" class=\"gofast-eye-btn\"\n                        onclick=\"gofastTogglePassword('login_pass', this)\">\n                    <svg viewBox=\"0 0 24 24\" class=\"gofast-eye-icon\">\n                        <path d=\"M12 4.5C7 4.5 2.7 8 1 12c1.7 4 6 7.5 11 7.5s9.3-3.5 11-7.5c-1.7-4-6-7.5-11-7.5zm0 12a4.5 4.5 0 110-9 4.5 4.5 0 010 9z\"\/>\n                    <\/svg>\n                <\/button>\n            <\/div>\n\n            <div class=\"gofast-remember-row\">\n                <input type=\"checkbox\" id=\"remember\" name=\"remember\">\n                <label for=\"remember\">Mantener sesi\u00f3n iniciada 30 d\u00edas<\/label>\n            <\/div>\n\n            <button type=\"submit\" name=\"gofast_login\" class=\"gofast-btn-action\">\n                \ud83d\ude80 Ingresar\n            <\/button>\n        <\/form>\n\n        <p class=\"gofast-auth-footer\">\n            \u00bfNo tienes cuenta?\n            <a href=\"<?= esc_url(home_url('\/auth\/?registro=1')) ?>\">Reg\u00edstrate aqu\u00ed<\/a>\n        <\/p>\n\n    <!-- REGISTRO -->\n    <?php else: ?>\n\n        <h2 class=\"gofast-auth-title\">Crear cuenta<\/h2>\n\n        <form method=\"post\" action=\"\">\n\n            <label>Nombre completo<\/label>\n            <input type=\"text\" name=\"nombre\" required>\n\n            <label>WhatsApp<\/label>\n            <input type=\"text\" name=\"telefono\" required>\n\n            <label>Email<\/label>\n            <input type=\"email\" name=\"email\" required>\n\n            <label>Contrase\u00f1a<\/label>\n            <div class=\"gofast-password-wrapper\">\n                <input type=\"password\" name=\"password\" id=\"reg_pass1\" required>\n                <button type=\"button\" class=\"gofast-eye-btn\"\n                        onclick=\"gofastTogglePassword('reg_pass1', this)\">\n                    <svg viewBox=\"0 0 24 24\" class=\"gofast-eye-icon\">\n                        <path d=\"M12 4.5C7 4.5 2.7 8 1 12c1.7 4 6 7.5 11 7.5s9.3-3.5 11-7.5c-1.7-4-6-7.5-11-7.5zm0 12a4.5 4.5 0 110-9 4.5 4.5 0 010 9z\"\/>\n                    <\/svg>\n                <\/button>\n            <\/div>\n\n            <label>Repite la contrase\u00f1a<\/label>\n            <div class=\"gofast-password-wrapper\">\n                <input type=\"password\" name=\"password2\" id=\"reg_pass2\" required>\n                <button type=\"button\" class=\"gofast-eye-btn\"\n                        onclick=\"gofastTogglePassword('reg_pass2', this)\">\n                    <svg viewBox=\"0 0 24 24\" class=\"gofast-eye-icon\">\n                        <path d=\"M12 4.5C7 4.5 2.7 8 1 12c1.7 4 6 7.5 11 7.5s9.3-3.5 11-7.5c-1.7-4-6-7.5-11-7.5zm0 12a4.5 4.5 0 110-9 4.5 4.5 0 010 9z\"\/>\n                    <\/svg>\n                <\/button>\n            <\/div>\n\n            <button type=\"submit\" name=\"gofast_registro\" class=\"gofast-btn-action\">\n                \u2705 Crear cuenta\n            <\/button>\n        <\/form>\n\n        <p class=\"gofast-auth-footer\">\n            \u00bfYa tienes cuenta?\n            <a href=\"<?= esc_url(home_url('\/auth')) ?>\">Inicia sesi\u00f3n<\/a>\n        <\/p>\n\n    <?php endif; ?>\n<\/div>\n\n<!-- JS -->\n<script>\n\/* Mostrar \/ ocultar contrase\u00f1a *\/\nfunction gofastTogglePassword(id, btn) {\n    const input = document.getElementById(id);\n    const icon = btn.querySelector(\"svg\");\n\n    if (input.type === \"password\") {\n        input.type = \"text\";\n        icon.style.opacity = \"0.4\";\n    } else {\n        input.type = \"password\";\n        icon.style.opacity = \"1\";\n    }\n}\n\n\/* Banner cookies *\/\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    if (!localStorage.getItem(\"gofast_cookie_ok\")) {\n        document.getElementById(\"cookieBox\").style.display = \"block\";\n    }\n});\nfunction gofastAcceptCookies() {\n    localStorage.setItem(\"gofast_cookie_ok\", \"1\");\n    document.getElementById(\"cookieBox\").style.display = \"none\";\n}\n<\/script>\n\n<!-- CSS -->\n<style>\n.gofast-auth-container{\n    max-width:420px;\n    margin:30px auto;\n    background:#fff;\n    padding:28px;\n    border-radius:12px;\n    color:#000;\n    border:1px solid #eee;\n}\n.gofast-auth-title{\n    font-size:26px;\n    font-weight:700;\n    margin-bottom:18px;\n}\n.gofast-alert-error{\n    background:#ffe5e5;\n    border-left:5px solid #d60000;\n    padding:10px 14px;\n    margin-bottom:18px;\n    border-radius:8px;\n    color:#700;\n    font-weight:600;\n}\n.gofast-cookie-box{\n    background:#fff8d1;\n    padding:10px;\n    border-radius:8px;\n    border-left:4px solid #f4c524;\n    margin-bottom:15px;\n    font-size:14px;\n}\n.gofast-cookie-btn{\n    background:#f4c524;\n    border:0;\n    padding:6px 12px;\n    border-radius:6px;\n    cursor:pointer;\n    font-weight:700;\n    margin-top:6px;\n}\nlabel{\n    font-weight:600;\n    margin-top:12px;\n    display:block;\n}\ninput[type=\"text\"],\ninput[type=\"email\"],\ninput[type=\"password\"]{\n    width:100%;\n    padding:12px;\n    border:1px solid #ccc;\n    border-radius:8px;\n    font-size:15px;\n    margin-top:4px;\n    margin-bottom:10px;\n}\n.gofast-password-wrapper{\n    position:relative;\n}\n.gofast-eye-btn{\n    position:absolute;\n    right:10px;\n    top:50%;\n    transform:translateY(-50%);\n    background:transparent;\n    border:none;\n    cursor:pointer;\n    padding:4px;\n}\n.gofast-eye-icon{\n    width:22px;\n    height:22px;\n    fill:#333;\n    transition:opacity .15s;\n}\n.gofast-remember-row{\n    display:flex;\n    align-items:center;\n    gap:6px;\n    margin:10px 0 18px;\n}\n.gofast-btn-action{\n    width:100%;\n    padding:14px;\n    background:#F4C524;\n    border:0;\n    border-radius:8px;\n    font-weight:700;\n    font-size:18px;\n    cursor:pointer;\n}\n.gofast-btn-action:hover{\n    background:#e6b91d;\n}\n.gofast-auth-footer{\n    text-align:center;\n    margin-top:18px;\n}\n.gofast-auth-footer a{\n    color:#0057ff;\n    font-weight:600;\n}\n<\/style>\n\n<?php\nreturn ob_get_clean();\n}\nadd_shortcode('gofast_auth', 'gofast_auth_shortcode');\n","active":true,"modified":"2025-11-21 21:23:36","revision":"1"}]}