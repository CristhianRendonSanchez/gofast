{"generator":"Code Snippets v3.9.3","date_created":"2025-12-12 19:47","snippets":[{"id":29,"name":"gofast_cookies_modal","code":"\n\/***************************************************\n * GOFAST \u2013 MODAL DE COOKIES (Aceptar\/Rechazar)\n * Aparece autom\u00e1ticamente si no se ha aceptado antes\n ***************************************************\/\n\nfunction gofast_cookies_modal() {\n    \/\/ Solo mostrar si no se ha aceptado\/rechazado antes\n    ob_start();\n    ?>\n    \n<div id=\"gofast-cookies-modal\" style=\"display:none;\">\n    <div class=\"gofast-cookies-overlay\"><\/div>\n    <div class=\"gofast-cookies-modal-content\">\n        <div class=\"gofast-cookies-header\">\n            <h3>\ud83c\udf6a Pol\u00edtica de Cookies<\/h3>\n        <\/div>\n        \n        <div class=\"gofast-cookies-body\">\n            <p>\n                Utilizamos cookies para mejorar tu experiencia en nuestro sitio web. \n                Las cookies nos permiten recordar tu sesi\u00f3n por <strong>30 d\u00edas<\/strong> para que \n                no tengas que iniciar sesi\u00f3n cada vez que nos visites.\n            <\/p>\n            \n            <div class=\"gofast-cookies-info\">\n                <h4>\u00bfQu\u00e9 cookies utilizamos?<\/h4>\n                <ul>\n                    <li><strong>Cookie de sesi\u00f3n persistente<\/strong>: Recuerda tu sesi\u00f3n por 30 d\u00edas<\/li>\n                    <li><strong>Cookie de preferencias<\/strong>: Guarda tu elecci\u00f3n sobre las cookies<\/li>\n                <\/ul>\n            <\/div>\n            \n            <p class=\"gofast-cookies-note\">\n                Puedes cambiar tu preferencia en cualquier momento. \n                Si rechazas las cookies, tendr\u00e1s que iniciar sesi\u00f3n cada vez que visites el sitio.\n            <\/p>\n        <\/div>\n        \n        <div class=\"gofast-cookies-actions\">\n            <button type=\"button\" class=\"gofast-cookies-btn-accept\" onclick=\"gofastAcceptCookies()\">\n                \u2705 Aceptar todas las cookies\n            <\/button>\n            <button type=\"button\" class=\"gofast-cookies-btn-reject\" onclick=\"gofastRejectCookies()\">\n                \u274c Rechazar cookies\n            <\/button>\n        <\/div>\n    <\/div>\n<\/div>\n\n<style>\n\/* Overlay oscuro de fondo *\/\n.gofast-cookies-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.6);\n    z-index: 999998;\n    backdrop-filter: blur(4px);\n}\n\n\/* Contenedor del modal *\/\n.gofast-cookies-modal-content {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: #fff;\n    border-radius: 16px;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n    max-width: 500px;\n    width: 90%;\n    max-height: 90vh;\n    overflow-y: auto;\n    z-index: 999999;\n    animation: gofastModalSlideIn 0.3s ease-out;\n}\n\n@keyframes gofastModalSlideIn {\n    from {\n        opacity: 0;\n        transform: translate(-50%, -60%);\n    }\n    to {\n        opacity: 1;\n        transform: translate(-50%, -50%);\n    }\n}\n\n\/* Header del modal *\/\n.gofast-cookies-header {\n    padding: 24px 24px 16px;\n    border-bottom: 2px solid #f0f0f0;\n}\n\n.gofast-cookies-header h3 {\n    margin: 0;\n    font-size: 24px;\n    font-weight: 700;\n    color: #333;\n}\n\n\/* Body del modal *\/\n.gofast-cookies-body {\n    padding: 20px 24px;\n    color: #555;\n    line-height: 1.6;\n}\n\n.gofast-cookies-body p {\n    margin: 0 0 16px 0;\n    font-size: 15px;\n}\n\n.gofast-cookies-body strong {\n    color: #F4C524;\n    font-weight: 600;\n}\n\n.gofast-cookies-info {\n    background: #f8f9fa;\n    padding: 16px;\n    border-radius: 8px;\n    margin: 16px 0;\n}\n\n.gofast-cookies-info h4 {\n    margin: 0 0 12px 0;\n    font-size: 16px;\n    color: #333;\n}\n\n.gofast-cookies-info ul {\n    margin: 8px 0 0 0;\n    padding-left: 20px;\n}\n\n.gofast-cookies-info li {\n    margin: 8px 0;\n    font-size: 14px;\n}\n\n.gofast-cookies-note {\n    font-size: 13px;\n    color: #777;\n    font-style: italic;\n    margin-top: 16px;\n}\n\n\/* Acciones del modal *\/\n.gofast-cookies-actions {\n    padding: 16px 24px 24px;\n    display: flex;\n    gap: 12px;\n    border-top: 2px solid #f0f0f0;\n}\n\n.gofast-cookies-btn-accept,\n.gofast-cookies-btn-reject {\n    flex: 1;\n    padding: 14px 20px;\n    border: none;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.gofast-cookies-btn-accept {\n    background: #F4C524;\n    color: #000;\n}\n\n.gofast-cookies-btn-accept:hover {\n    background: #e6b91d;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 8px rgba(244, 197, 36, 0.3);\n}\n\n.gofast-cookies-btn-reject {\n    background: #f0f0f0;\n    color: #666;\n}\n\n.gofast-cookies-btn-reject:hover {\n    background: #e0e0e0;\n    transform: translateY(-1px);\n}\n\n\/* Responsive *\/\n@media (max-width: 600px) {\n    .gofast-cookies-modal-content {\n        width: 95%;\n        max-height: 85vh;\n    }\n    \n    .gofast-cookies-header h3 {\n        font-size: 20px;\n    }\n    \n    .gofast-cookies-actions {\n        flex-direction: column;\n    }\n    \n    .gofast-cookies-btn-accept,\n    .gofast-cookies-btn-reject {\n        width: 100%;\n    }\n}\n<\/style>\n\n<script>\n(function() {\n    'use strict';\n    \n    \/\/ Verificar si ya se ha aceptado\/rechazado\n    const cookiePreference = localStorage.getItem('gofast_cookies_preference');\n    \n    \/\/ Si no hay preferencia guardada, mostrar modal\n    if (!cookiePreference) {\n        const modal = document.getElementById('gofast-cookies-modal');\n        if (modal) {\n            \/\/ Mostrar modal despu\u00e9s de un peque\u00f1o delay para mejor UX\n            setTimeout(function() {\n                modal.style.display = 'block';\n                document.body.style.overflow = 'hidden'; \/\/ Prevenir scroll\n            }, 500);\n        }\n    }\n    \n    \/\/ Funci\u00f3n para aceptar cookies\n    window.gofastAcceptCookies = function() {\n        localStorage.setItem('gofast_cookies_preference', 'accepted');\n        localStorage.setItem('gofast_cookie_ok', '1'); \/\/ Compatibilidad con c\u00f3digo existente\n        \n        \/\/ Cerrar modal\n        const modal = document.getElementById('gofast-cookies-modal');\n        if (modal) {\n            modal.style.display = 'none';\n            document.body.style.overflow = ''; \/\/ Restaurar scroll\n        }\n        \n        \/\/ Si el usuario ya est\u00e1 logueado, intentar crear cookie ahora\n        \/\/ (para usuarios que se registraron antes de aceptar cookies)\n        setTimeout(function() {\n            if (typeof gofastCreateCookieIfLoggedIn === 'function') {\n                gofastCreateCookieIfLoggedIn();\n            }\n        }, 100);\n        \n        \/\/ Mostrar mensaje de confirmaci\u00f3n\n        console.log('\u2705 Cookies aceptadas. Tu sesi\u00f3n se recordar\u00e1 por 30 d\u00edas.');\n    };\n    \n    \/\/ Funci\u00f3n para rechazar cookies\n    window.gofastRejectCookies = function() {\n        localStorage.setItem('gofast_cookies_preference', 'rejected');\n        \n        \/\/ Eliminar cookie persistente si existe\n        document.cookie = \"gofast_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=\/;\";\n        \n        \/\/ Cerrar modal\n        const modal = document.getElementById('gofast-cookies-modal');\n        if (modal) {\n            modal.style.display = 'none';\n            document.body.style.overflow = ''; \/\/ Restaurar scroll\n        }\n        \n        \/\/ Mostrar mensaje\n        console.log('\u274c Cookies rechazadas. Tu sesi\u00f3n no se recordar\u00e1.');\n        \n        \/\/ Opcional: Mostrar notificaci\u00f3n al usuario\n        alert('Has rechazado las cookies. Tendr\u00e1s que iniciar sesi\u00f3n cada vez que visites el sitio.');\n    };\n    \n    \/\/ Funci\u00f3n para crear cookie si el usuario ya est\u00e1 logueado\n    \/\/ (se llama despu\u00e9s de aceptar cookies)\n    window.gofastCreateCookieIfLoggedIn = function() {\n        \/\/ Si el usuario ya est\u00e1 logueado, recargar para crear cookie\n        \/\/ El servidor detectar\u00e1 que acept\u00f3 cookies y crear\u00e1 la cookie\n        if (document.body.classList.contains('gofast-user-logged-in') || \n            document.querySelector('.gofast-welcome')) {\n            \/\/ Usuario est\u00e1 logueado, recargar para crear cookie\n            window.location.reload();\n        }\n    };\n    \n    \/\/ Agregar clase al body si el usuario est\u00e1 logueado (para detectar)\n    document.addEventListener('DOMContentLoaded', function() {\n        \/\/ Verificar si hay indicadores de usuario logueado\n        const welcomeMsg = document.querySelector('.gofast-welcome');\n        const logoutLink = document.querySelector('a[href*=\"gofast_logout\"]');\n        if (welcomeMsg || logoutLink) {\n            document.body.classList.add('gofast-user-logged-in');\n        }\n    });\n    \n    \/\/ Cerrar modal al hacer clic en el overlay (opcional)\n    document.addEventListener('DOMContentLoaded', function() {\n        const modal = document.getElementById('gofast-cookies-modal');\n        const overlay = modal ? modal.querySelector('.gofast-cookies-overlay') : null;\n        \n        if (overlay) {\n            overlay.addEventListener('click', function(e) {\n                \/\/ No cerrar al hacer clic en overlay (forzar decisi\u00f3n)\n                \/\/ Si quieres permitir cerrar, descomenta:\n                \/\/ gofastRejectCookies();\n            });\n        }\n    });\n})();\n<\/script>\n\n    <?php\n    return ob_get_clean();\n}\n\n\/\/ Agregar el modal al footer de todas las p\u00e1ginas\nadd_action('wp_footer', function() {\n    echo gofast_cookies_modal();\n}, 999);\n\n","active":true,"modified":"2025-12-02 16:08:42","revision":"1"}]}